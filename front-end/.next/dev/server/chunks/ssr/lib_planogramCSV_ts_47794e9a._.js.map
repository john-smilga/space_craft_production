{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/olya/Desktop/space_craft_production/front-end/lib/planogramCSV.ts"],"sourcesContent":["import { z } from 'zod';\nimport { schemas } from '@/lib/generated/api-schemas';\nimport type { GridResponse } from '@/features/planogram/types';\n\ntype PlanogramType = z.infer<typeof schemas.Planogram>;\n\nexport function generatePlanogramCSV(planogram: PlanogramType | null | undefined, layout: GridResponse | null): string {\n  if (!planogram) {\n    return 'No planogram data available';\n  }\n\n  const rows: string[] = [];\n\n  // Header row\n  rows.push('Planogram Name,Project,Season,Categories,Display,Dimensions (W×H×D),Shelves,Shelf Spacing');\n\n  // Metadata row\n  const categories = Array.isArray(planogram.categories) \n    ? (planogram.categories as Array<{ name: string }>).map((c) => c.name).join('; ') \n    : 'N/A';\n  const displayName = planogram.display_name || 'N/A';\n  // Get dimensions from planogram (they're at the top level)\n  const widthIn = planogram.width_in;\n  const heightIn = planogram.height_in;\n  const depthIn = planogram.depth_in;\n  const dimensions = widthIn && heightIn ? `${widthIn}\"×${heightIn}\"${depthIn ? `×${depthIn}\"` : ''}` : 'N/A';\n\n  const projectName = planogram.project_name || 'Unknown';\n  const seasonDisplay = planogram.season || 'N/A';\n  const shelfCount = planogram.shelf_count ?? 'N/A';\n  const shelfSpacing = planogram.shelf_spacing?.toString() || 'N/A';\n  rows.push([`\"${planogram.name.replace(/\"/g, '\"\"')}\"`, `\"${projectName.replace(/\"/g, '\"\"')}\"`, seasonDisplay, `\"${categories.replace(/\"/g, '\"\"')}\"`, `\"${displayName.replace(/\"/g, '\"\"')}\"`, dimensions, shelfCount.toString(), shelfSpacing].join(','));\n\n  // Empty row\n  rows.push('');\n\n  // Products table header\n  rows.push('Row/Shelf,Product Name,Category,Position X,Position Y,Width,Height,Score');\n\n  // Products data\n  if (layout && layout.rows.length > 0) {\n    layout.rows.forEach((row) => {\n      row.items.forEach((item) => {\n        const score = item.meta?.score != null ? item.meta.score.toString() : 'N/A';\n        rows.push([`\"${row.name.replace(/\"/g, '\"\"')}\"`, `\"${item.meta.name.replace(/\"/g, '\"\"')}\"`, `\"${(item.meta.category || 'N/A').replace(/\"/g, '\"\"')}\"`, item.x.toString(), item.y.toString(), item.w.toString(), item.h.toString(), score].join(','));\n      });\n    });\n  }\n\n  return rows.join('\\n');\n}\n"],"names":[],"mappings":";;;;AAMO,SAAS,qBAAqB,SAA2C,EAAE,MAA2B;IAC3G,IAAI,CAAC,WAAW;QACd,OAAO;IACT;IAEA,MAAM,OAAiB,EAAE;IAEzB,aAAa;IACb,KAAK,IAAI,CAAC;IAEV,eAAe;IACf,MAAM,aAAa,MAAM,OAAO,CAAC,UAAU,UAAU,IACjD,AAAC,UAAU,UAAU,CAA6B,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,EAAE,IAAI,CAAC,QAC1E;IACJ,MAAM,cAAc,UAAU,YAAY,IAAI;IAC9C,2DAA2D;IAC3D,MAAM,UAAU,UAAU,QAAQ;IAClC,MAAM,WAAW,UAAU,SAAS;IACpC,MAAM,UAAU,UAAU,QAAQ;IAClC,MAAM,aAAa,WAAW,WAAW,GAAG,QAAQ,EAAE,EAAE,SAAS,CAAC,EAAE,UAAU,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,IAAI,GAAG;IAEtG,MAAM,cAAc,UAAU,YAAY,IAAI;IAC9C,MAAM,gBAAgB,UAAU,MAAM,IAAI;IAC1C,MAAM,aAAa,UAAU,WAAW,IAAI;IAC5C,MAAM,eAAe,UAAU,aAAa,EAAE,cAAc;IAC5D,KAAK,IAAI,CAAC;QAAC,CAAC,CAAC,EAAE,UAAU,IAAI,CAAC,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC;QAAE,CAAC,CAAC,EAAE,YAAY,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC;QAAE;QAAe,CAAC,CAAC,EAAE,WAAW,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC;QAAE,CAAC,CAAC,EAAE,YAAY,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC;QAAE;QAAY,WAAW,QAAQ;QAAI;KAAa,CAAC,IAAI,CAAC;IAElP,YAAY;IACZ,KAAK,IAAI,CAAC;IAEV,wBAAwB;IACxB,KAAK,IAAI,CAAC;IAEV,gBAAgB;IAChB,IAAI,UAAU,OAAO,IAAI,CAAC,MAAM,GAAG,GAAG;QACpC,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC;YACnB,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;gBACjB,MAAM,QAAQ,KAAK,IAAI,EAAE,SAAS,OAAO,KAAK,IAAI,CAAC,KAAK,CAAC,QAAQ,KAAK;gBACtE,KAAK,IAAI,CAAC;oBAAC,CAAC,CAAC,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC;oBAAE,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC;oBAAE,CAAC,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC,QAAQ,IAAI,KAAK,EAAE,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC;oBAAE,KAAK,CAAC,CAAC,QAAQ;oBAAI,KAAK,CAAC,CAAC,QAAQ;oBAAI,KAAK,CAAC,CAAC,QAAQ;oBAAI,KAAK,CAAC,CAAC,QAAQ;oBAAI;iBAAM,CAAC,IAAI,CAAC;YAC/O;QACF;IACF;IAEA,OAAO,KAAK,IAAI,CAAC;AACnB"}}]
}