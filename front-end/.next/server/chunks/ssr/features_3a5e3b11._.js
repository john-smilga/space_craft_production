module.exports=[34714,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(3130);function e({project:a}){return(0,b.jsx)(c.default,{href:`/dashboard/projects/${a.slug}`,className:"block",children:(0,b.jsx)(d.Card,{className:"p-6 hover:border-primary hover:shadow-md transition-all",children:(0,b.jsxs)(d.CardContent,{className:"p-0",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold mb-1",children:a.name}),a.store_name?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:a.store_name}),(0,b.jsx)("p",{className:"text-sm text-foreground",children:a.store_code})]}):(0,b.jsx)("p",{className:"text-sm text-destructive mb-2",children:"Store not found"})]})})})}a.s(["ProjectCard",()=>e])},77775,a=>{"use strict";var b=a.i(95345),c=a.i(74560),d=a.i(12032);function e(){return(0,c.usePaginatedQuery)(["projects"],async()=>{let a=await b.default.get("/projects/");return d.schemas.PaginatedProjectListList.parse(a.data)})}a.s(["useProjectsQuery",()=>e])},77504,a=>{"use strict";var b=a.i(33217),c=a.i(95345),d=a.i(12032);function e(a){return(0,b.useQuery)({queryKey:["project",a],queryFn:async()=>{if(!a)throw Error("Project slug is required");let b=await c.default.get(`/projects/${a}/`);return d.schemas.Project.parse(b.data)},enabled:!!a})}a.s(["useProjectQuery",()=>e])},32077,a=>{"use strict";var b=a.i(95345),c=a.i(74560),d=a.i(12032);function e(){return(0,c.useAppMutation)(async a=>{let c=d.schemas.ProjectCreateRequest.parse(a),e=await b.default.post("/projects/",c);return d.schemas.Project.parse(e.data)},{successMessage:"Project created successfully",errorMessage:"Failed to create project",invalidateQueries:[["projects"]]})}a.s(["useCreateProjectMutation",()=>e])},21499,a=>{"use strict";var b=a.i(37927),c=a.i(95345),d=a.i(74560),e=a.i(12032);function f(a){let f=(0,b.useQueryClient)();return(0,d.useAppMutation)(async b=>{let d=e.schemas.ProjectUpdateRequest.parse(b),f=await c.default.put(`/projects/${a}/`,d);return e.schemas.ProjectUpdate.parse(f.data)},{successMessage:"Project updated successfully",errorMessage:"Failed to update project",invalidateQueries:[["projects"],["project",a]],onSuccess:a=>{f.invalidateQueries({queryKey:["project",a.name]})}})}a.s(["useUpdateProjectMutation",()=>f])},43197,a=>{"use strict";var b=a.i(95345),c=a.i(74560);function d(a){return(0,c.useAppMutation)(async()=>{await b.default.delete(`/projects/${a}/`)},{successMessage:"Project deleted successfully",errorMessage:"Failed to delete project",invalidateQueries:[["projects"],["project",a]]})}a.s(["useDeleteProjectMutation",()=>d])},45596,a=>{"use strict";var b=a.i(95345),c=a.i(74560),d=a.i(12032);function e(){return(0,c.usePaginatedQuery)(["stores"],async()=>{let a=await b.default.get("/stores/");return d.schemas.PaginatedStoreListList.parse(a.data)})}a.s(["useStoresQuery",()=>e])},15937,a=>{"use strict";var b=a.i(33217),c=a.i(95345),d=a.i(12032);function e(a){return(0,b.useQuery)({queryKey:["store",a],queryFn:async()=>{if(!a)throw Error("Store slug is required");let b=await c.default.get(`/stores/${a}/`);return d.schemas.Store.parse(b.data)},enabled:!!a})}a.s(["useStoreQuery",()=>e])},34737,a=>{"use strict";var b=a.i(95345),c=a.i(74560),d=a.i(12032);function e(){return(0,c.useAppMutation)(async a=>{let c=d.schemas.StoreCreateRequest.parse(a),e=await b.default.post("/stores/",c);return d.schemas.Store.parse(e.data)},{successMessage:"Store created successfully",errorMessage:"Failed to create store",invalidateQueries:[["stores"]]})}a.s(["useCreateStoreMutation",()=>e])},31893,a=>{"use strict";var b=a.i(37927),c=a.i(95345),d=a.i(74560),e=a.i(12032);function f(a){let f=(0,b.useQueryClient)();return(0,d.useAppMutation)(async b=>{let d=e.schemas.StoreUpdateRequest.parse(b),f=await c.default.put(`/stores/${a}/`,d);return e.schemas.StoreUpdate.parse(f.data)},{successMessage:"Store updated successfully",errorMessage:"Failed to update store",invalidateQueries:[["stores"],["store",a]],onSuccess:a=>{f.invalidateQueries({queryKey:["store",a.name]})}})}a.s(["useUpdateStoreMutation",()=>f])},37724,a=>{"use strict";var b=a.i(95345),c=a.i(74560);function d(a){return(0,c.useAppMutation)(async()=>{await b.default.delete(`/stores/${a}/`)},{successMessage:"Store deleted successfully",errorMessage:"Failed to delete store",invalidateQueries:[["stores"],["store",a]]})}a.s(["useDeleteStoreMutation",()=>d])},70890,a=>{"use strict";a.i(45596),a.i(15937),a.i(34737),a.i(31893),a.i(37724),a.s([])},18955,75047,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(15353),e=a.i(92994),f=a.i(40695),g=a.i(65602);a.i(70890);var h=a.i(45596);function i({name:a,store_code:d,slug:e,address:f}){return(0,b.jsxs)(c.default,{href:`/dashboard/stores/${e}`,className:"block bg-card rounded-lg border border-border p-6 hover:border-primary hover:shadow-md transition-all",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold mb-1",children:a}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:d}),f&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:f})]})}function j(){let{data:a,isLoading:j,error:k}=(0,h.useStoresQuery)(),l=a||[];return j?(0,b.jsx)("div",{className:"text-center py-8",children:"Loading..."}):k?(0,b.jsx)(g.Alert,{variant:"destructive",className:"mb-4",children:(0,b.jsx)(g.AlertDescription,{children:k.message})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Stores"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage your stores"})]}),(0,b.jsx)(d.AdminOnly,{children:(0,b.jsx)(f.Button,{asChild:!0,children:(0,b.jsx)(c.default,{href:"/dashboard/stores/new",children:"+ Create Store"})})})]}),l.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(a=>(0,b.jsx)(i,{name:a.name,store_code:a.store_code,slug:a.slug},a.id))}):(0,b.jsx)(e.default,{message:"No stores available"})]})}a.s(["StoreCard",()=>i],75047),a.s(["StoreList",()=>j],18955)},30357,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(85767);var e=a.i(60556),f=a.i(40695),g=a.i(3130),h=a.i(65602),i=a.i(65626),j=a.i(17171),k=a.i(97895);function l({className:a,...c}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,k.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...c})}a.i(70890);var m=a.i(34737),n=a.i(31893),o=a.i(15937);function p({storeSlug:a,mode:k}){(0,e.useRequireAdmin)();let p=(0,d.useRouter)(),{data:q,isLoading:r}=(0,o.useStoreQuery)("edit"===k&&a?a:null),[s,t]=(0,c.useState)("create"===k?"First Store Tampa":""),[u,v]=(0,c.useState)("create"===k?"TAMPA-001":""),[w,x]=(0,c.useState)("create"===k?"123 Main Street,\nTampa, FL 33602":""),y=(0,m.useCreateStoreMutation)(),z=(0,n.useUpdateStoreMutation)(a||""),A="create"===k?y:z;(0,c.useEffect)(()=>{"edit"!==k||!q||s||u||w||Promise.resolve().then(()=>{t(q.name),v(q.store_code),x(q.address)})},[k,q,s,u,w]);let B=async a=>{a.preventDefault();try{await A.mutateAsync({name:s,store_code:u,address:w}),p.push("/dashboard/stores")}catch{}};return"edit"===k&&r?(0,b.jsx)("div",{className:"text-center py-8",children:"Loading..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"create"===k?"Create Store":"Edit Store"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"create"===k?"Add a new store location":"Update store information"})]}),(0,b.jsxs)(g.Card,{className:"max-w-2xl",children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{children:"Store Information"}),(0,b.jsx)(g.CardDescription,{children:"create"===k?"Enter the details for the new store location":"Update the details for this store"})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,b.jsx)(i.FormField,{label:"Store Name *",type:"text",value:s,onChange:a=>t(a.target.value),required:!0,placeholder:"e.g., Walmart Supercenter Seattle"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground -mt-2",children:"Format: Store Area City"}),(0,b.jsx)(i.FormField,{label:"Store Code *",type:"text",value:u,onChange:a=>v(a.target.value),required:!0,placeholder:"e.g., SEA-001"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground -mt-2",children:"Format: CITY-NUMBER"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"address",children:"Address *"}),(0,b.jsx)(l,{id:"address",value:w,onChange:a=>x(a.target.value),required:!0,rows:3,placeholder:"Store address"})]}),A.isError&&(0,b.jsx)(h.Alert,{variant:"destructive",children:(0,b.jsx)(h.AlertDescription,{children:A.error?.message||`Failed to ${k} store`})}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsx)(f.Button,{type:"submit",disabled:A.isPending,children:A.isPending?"create"===k?"Creating...":"Updating...":"create"===k?"Create Store":"Update Store"}),(0,b.jsx)(f.Button,{type:"button",onClick:()=>p.push("edit"===k&&a?`/dashboard/stores/${a}`:"/dashboard/stores"),disabled:A.isPending,variant:"outline",children:"Cancel"})]})]})})]})]})}a.s(["StoreForm",()=>p],30357)},60271,a=>{"use strict";a.s(["StoreDetail",()=>p]);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(15353),g=a.i(92994),h=a.i(40695),i=a.i(3130),j=a.i(65602),k=a.i(623),l=a.i(97895);a.i(35400);var m=a.i(77775);a.i(70890);var n=a.i(15937),o=a.i(37724);function p({storeSlug:a}){let p=(0,d.useRouter)(),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),{data:u,isLoading:v,error:w}=(0,n.useStoreQuery)(a),{data:x}=(0,m.useProjectsQuery)(),y=u?(x||[]).filter(a=>a.store_code===u.store_code):[],z=(0,o.useDeleteStoreMutation)(a),A=async()=>{if(!s)return void t(!0);try{await z.mutateAsync(),p.push("/dashboard/stores")}catch{}};return v?(0,b.jsx)("div",{className:"text-center py-8",children:"Loading..."}):w&&!u?(0,b.jsxs)(j.Alert,{variant:"destructive",className:"mb-4",children:[(0,b.jsx)(j.AlertDescription,{children:w.message}),(0,b.jsx)(h.Button,{onClick:()=>p.push("/dashboard/stores"),variant:"outline",className:"mt-4",children:"Back to Stores"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center gap-3",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:u?.name||"Store Details"}),u&&(0,b.jsxs)(h.Button,{onClick:()=>r(!q),variant:"outline",size:"sm",className:"ml-6",children:[q?"Hide":"Show"," Details"]})]}),z.isError&&(0,b.jsx)(j.Alert,{variant:"destructive",className:"mb-4",children:(0,b.jsx)(j.AlertDescription,{children:z.error?.message})}),u&&q&&(0,b.jsx)(i.Card,{className:"mb-6",children:(0,b.jsx)(i.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 gap-y-8",children:[(0,b.jsx)(k.default,{label:"Store Code",value:u.store_code}),(0,b.jsx)(k.default,{label:"Address",value:u.address,valueClassName:"line-clamp-2"}),(0,b.jsx)(k.default,{label:"Created At",value:(0,l.formatDate)(u.created_at)}),(0,b.jsx)(k.default,{label:"Created By",value:u.created_by_username||"N/A"}),(0,b.jsx)("div",{className:"md:col-start-1 md:row-start-2"}),(0,b.jsx)("div",{className:"md:col-start-2 md:row-start-2"}),(0,b.jsx)("div",{className:"md:col-start-3 md:row-start-2"}),(0,b.jsx)(f.AdminOnly,{children:(0,b.jsxs)("div",{className:"md:col-start-4 md:row-start-2 flex flex-row gap-2",children:[!s&&(0,b.jsx)(h.Button,{asChild:!0,variant:"outline",size:"sm",className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 hover:text-green-800",children:(0,b.jsx)(e.default,{href:`/dashboard/stores/${a}/edit`,children:"Edit Store"})}),(0,b.jsx)(h.Button,{onClick:A,disabled:z.isPending,variant:s?"destructive":"outline",size:"sm",className:s?"":"bg-red-50 text-red-700 border-red-200 hover:bg-red-100 hover:text-red-800",children:z.isPending?"Deleting...":s?"Confirm Delete":"Delete Store"}),s&&(0,b.jsx)(h.Button,{onClick:()=>t(!1),variant:"outline",size:"sm",children:"Cancel"})]})})]})})}),u&&(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Projects"})}),(0,b.jsx)(i.CardContent,{children:y.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(a=>(0,b.jsx)(e.default,{href:`/dashboard/projects/${a.slug}`,className:"block",children:(0,b.jsx)(i.Card,{className:"p-4 hover:border-primary shadow-md transition-all",children:(0,b.jsx)(i.CardContent,{className:"p-0",children:(0,b.jsx)("h3",{className:"text-lg font-semibold",children:a.name})})})},a.id))}):(0,b.jsx)(g.default,{message:"This store has no projects yet"})})]})]})}},55673,a=>{"use strict";a.s([],55673),a.i(75047),a.i(18955),a.i(30357),a.i(60271),a.i(70890)},93257,a=>{"use strict";a.s(["ProjectList",()=>k]);var b=a.i(87924),c=a.i(38246),d=a.i(92994),e=a.i(40695),f=a.i(65602),g=a.i(15353);a.i(29622);var h=a.i(77775);a.i(55673);var i=a.i(45596),j=a.i(34714);function k(){let{data:a,isLoading:k,error:l}=(0,h.useProjectsQuery)(),m=a||[],{data:n}=(0,i.useStoresQuery)(),o=(n||[]).length>0;return k?(0,b.jsx)("div",{className:"text-center py-8",children:"Loading..."}):l?(0,b.jsx)(f.Alert,{variant:"destructive",className:"mb-4",children:(0,b.jsx)(f.AlertDescription,{children:l.message})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Projects"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage your projects"})]}),o&&(0,b.jsx)(e.Button,{asChild:!0,children:(0,b.jsx)(c.default,{href:"/dashboard/projects/new",children:"+ Create Project"})})]}),!o&&(0,b.jsx)(g.AdminOnly,{children:(0,b.jsx)(f.Alert,{className:"mb-6",children:(0,b.jsxs)(f.AlertDescription,{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:"ðŸ’¡"}),(0,b.jsxs)("span",{children:[(0,b.jsx)("strong",{children:"Note:"})," To create a project, navigate to the"," ",(0,b.jsx)(c.default,{href:"/dashboard/stores",className:"text-primary hover:underline",children:"stores"})," ","page and create the"," ",(0,b.jsx)(c.default,{href:"/dashboard/stores/new",className:"text-primary hover:underline",children:"store"})," ","first."]})]})})}),m.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(a=>(0,b.jsx)(j.ProjectCard,{project:a},a.id))}):(0,b.jsx)(d.default,{message:"No projects yet"})]})}},82267,a=>{"use strict";var b=a.i(87924);a.i(85767);var c=a.i(60556),d=a.i(38246),e=a.i(65602);function f(){let a=(0,c.useIsAdmin)();return(0,b.jsxs)(e.Alert,{className:"mb-6",children:[(0,b.jsx)(e.AlertDescription,{className:"mb-2",children:"You need at least one store to create a project."}),a?(0,b.jsx)(d.default,{href:"/dashboard/stores/new",className:"text-primary underline font-medium",children:"Create Store"}):(0,b.jsx)("p",{className:"text-sm",children:"Please contact an administrator to create a store."})]})}a.s(["NoStoresAlert",()=>f])},29622,5354,47564,a=>{"use strict";a.i(77775);var b=a.i(77504);a.i(32077),a.i(21499);var c=a.i(43197);a.s([],29622);var d=a.i(87924),e=a.i(72131),f=a.i(50944),g=a.i(38246),h=a.i(3130),i=a.i(40695),j=a.i(65602),k=a.i(15353),l=a.i(623),m=a.i(97895),n=a.i(92994);a.i(71283);var o=a.i(22413);function p({projectSlug:a,planograms:b}){return(0,d.jsxs)(h.Card,{children:[(0,d.jsx)(h.CardHeader,{children:(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)(h.CardTitle,{children:"Planograms"}),(0,d.jsx)(i.Button,{asChild:!0,size:"sm",children:(0,d.jsx)(g.default,{href:`/dashboard/projects/${a}/planograms/new`,children:"+ Create Planogram"})})]})}),(0,d.jsx)(h.CardContent,{children:b.length>0?(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(b=>(0,d.jsx)(o.PlanogramCard,{name:b.name,slug:b.slug,projectSlug:a,displayName:b.display_name||null,seasonDisplay:b.season||"",categories:b.categories,categoryIds:Array.isArray(b.category_ids)?b.category_ids:[]},b.id))}):(0,d.jsx)(n.default,{message:"No planograms yet"})})]})}a.s(["ProjectPlanogramsCard",()=>p],5354);var q=a.i(33217),r=a.i(88780),s=a.i(95345),t=a.i(12032);let u=r.z.object({planograms:r.z.array(t.schemas.PlanogramList)});function v({projectSlug:a}){let n=(0,f.useRouter)(),[o,r]=(0,e.useState)(!1),[t,v]=(0,e.useState)(!1),{data:w,isLoading:x,error:y}=(0,b.useProjectQuery)(a),{data:z}=(0,q.useQuery)({queryKey:["planograms","project",a],queryFn:async()=>{let b=await s.default.get(`/projects/${a}/planograms/`);return u.parse(b.data)},enabled:!!a}),A=z?.planograms||[],B=(0,c.useDeleteProjectMutation)(a),C=async()=>{if(!t)return void v(!0);try{await B.mutateAsync(),n.push("/dashboard/projects")}catch{}};return x?(0,d.jsx)("div",{className:"text-center py-8",children:"Loading..."}):y&&!w?(0,d.jsxs)(j.Alert,{variant:"destructive",className:"mb-4",children:[(0,d.jsx)(j.AlertDescription,{children:y.message}),(0,d.jsx)(i.Button,{onClick:()=>n.push("/dashboard/projects"),variant:"outline",className:"mt-4",children:"Back to Projects"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"mb-6 flex items-center gap-3",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold",children:w?.name||"Project Details"}),w&&(0,d.jsxs)(i.Button,{onClick:()=>r(!o),variant:"outline",size:"sm",className:"ml-6",children:[o?"Hide":"Show"," Details"]})]}),B.isError&&(0,d.jsx)(j.Alert,{variant:"destructive",className:"mb-4",children:(0,d.jsx)(j.AlertDescription,{children:B.error?.message})}),w&&o&&(0,d.jsx)(h.Card,{className:"mb-6",children:(0,d.jsx)(h.CardContent,{className:"p-4",children:(0,d.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 gap-y-8",children:[(0,d.jsx)(l.default,{label:"Store",value:w.store_slug?(0,d.jsx)(g.default,{href:`/dashboard/stores/${w.store_slug}`,className:"text-primary hover:underline",children:w.store_name}):(0,d.jsx)("span",{className:"text-destructive",children:"Store not found"})}),(0,d.jsx)(l.default,{label:"Store Code",value:w.store_code||"N/A"}),(0,d.jsx)(l.default,{label:"Created At",value:(0,m.formatDate)(w.created_at)}),(0,d.jsx)(l.default,{label:"Created By",value:w.created_by_username||"N/A"}),(0,d.jsx)("div",{className:"md:col-start-1 md:row-start-2"}),(0,d.jsx)("div",{className:"md:col-start-2 md:row-start-2"}),(0,d.jsx)("div",{className:"md:col-start-3 md:row-start-2"}),(0,d.jsx)(k.AdminOnly,{children:(0,d.jsxs)("div",{className:"md:col-start-4 md:row-start-2 flex flex-row gap-2",children:[!t&&(0,d.jsx)(i.Button,{asChild:!0,variant:"outline",size:"sm",className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 hover:text-green-800",children:(0,d.jsx)(g.default,{href:`/dashboard/projects/${a}/edit`,children:"Edit Project"})}),(0,d.jsx)(i.Button,{onClick:C,disabled:B.isPending,variant:t?"destructive":"outline",size:"sm",className:t?"":"bg-red-50 text-red-700 border-red-200 hover:bg-red-100 hover:text-red-800",children:B.isPending?"Deleting...":t?"Confirm Delete":"Delete Project"}),t&&(0,d.jsx)(i.Button,{onClick:()=>v(!1),variant:"outline",size:"sm",children:"Cancel"})]})})]})})}),w&&(0,d.jsx)(p,{projectSlug:a,planograms:A})]})}a.s(["ProjectDetail",()=>v],47564)},35400,40440,a=>{"use strict";a.s([],35400),a.i(34714),a.i(93257),a.s(["ProjectForm",()=>o],40440);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(40695),f=a.i(65626),g=a.i(64781),h=a.i(3130),i=a.i(65602);a.i(29622);var j=a.i(32077),k=a.i(21499),l=a.i(77504);a.i(55673);var m=a.i(45596),n=a.i(82267);function o({projectSlug:a,mode:o}){let p=(0,d.useRouter)(),{data:q,isLoading:r}=(0,l.useProjectQuery)("edit"===o&&a?a:null),{data:s}=(0,m.useStoresQuery)(),t=s||[],[u,v]=(0,c.useState)("create"===o?"New Project 111":""),[w,x]=(0,c.useState)(""),y=(0,j.useCreateProjectMutation)(),z=(0,k.useUpdateProjectMutation)(a||""),A="create"===o?y:z;(0,c.useEffect)(()=>{"edit"!==o||!q||u||w||Promise.resolve().then(()=>{v(q.name),x(q.store_slug||"")})},[o,q,u,w]);let B=async a=>{if(a.preventDefault(),!w)return;let b=t.find(a=>a.slug===w);if(!b)return;let c={name:u,store:b.id};try{await A.mutateAsync(c),p.push("/dashboard/projects")}catch{}},C=t.length>0,D=t.map(a=>({value:a.slug,label:`${a.name} (${a.store_code})`}));return"edit"===o&&r?(0,b.jsx)("div",{className:"text-center py-8",children:"Loading..."}):"edit"!==o||q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"create"===o?"Create Project":"Edit Project"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"create"===o?"Add a new project to a store":"Update project information"})]}),(0,b.jsxs)(h.Card,{className:"max-w-2xl",children:["create"===o&&(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Project Information"}),(0,b.jsx)(h.CardDescription,{children:"Enter the details for the new project"})]}),"edit"===o&&(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Project Information"}),(0,b.jsx)(h.CardDescription,{children:"Update the details for this project"})]}),(0,b.jsxs)(h.CardContent,{className:"create"===o?"":"p-6",children:["create"===o&&!C&&(0,b.jsx)(n.NoStoresAlert,{}),(0,b.jsxs)("form",{onSubmit:B,className:"space-y-4",children:["edit"===o&&(0,b.jsx)(f.FormField,{label:"Project Name *",type:"text",value:u,onChange:a=>v(a.target.value),required:!0,placeholder:"e.g., Meat Section Remodel"}),(0,b.jsx)(g.FormSelectField,{label:"Store *",value:w,onValueChange:x,options:D,placeholder:"Select a store",disabled:"create"===o&&!C}),"create"===o&&!C&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground -mt-2",children:"No stores available. Please create a store first."}),"create"===o&&(0,b.jsx)(f.FormField,{label:"Project Name *",type:"text",value:u,onChange:a=>v(a.target.value),required:!0,disabled:!C,placeholder:"e.g., Meat Section, Bakery"}),A.isError&&(0,b.jsx)(i.Alert,{variant:"destructive",children:(0,b.jsx)(i.AlertDescription,{children:A.error?.message||`Failed to ${o} project`})}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsx)(e.Button,{type:"submit",disabled:A.isPending||"create"===o&&!C,children:A.isPending?"create"===o?"Creating...":"Updating...":"create"===o?"Create Project":"Update Project"}),(0,b.jsx)(e.Button,{type:"button",onClick:()=>p.push("edit"===o&&a?`/dashboard/projects/${a}`:"/dashboard/projects"),disabled:A.isPending,variant:"outline",children:"Cancel"})]})]})]})]})]}):(0,b.jsxs)(i.Alert,{variant:"destructive",className:"mb-4",children:[(0,b.jsx)(i.AlertDescription,{children:"Project not found"}),(0,b.jsx)(e.Button,{onClick:()=>p.push("/dashboard/projects"),variant:"outline",className:"mt-4",children:"Back to Projects"})]})}a.i(47564),a.i(5354)}];

//# sourceMappingURL=features_3a5e3b11._.js.map