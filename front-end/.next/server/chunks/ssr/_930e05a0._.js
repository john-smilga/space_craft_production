module.exports=[20226,12903,62435,a=>{"use strict";var b=a.i(72131);let c=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},d=a=>a?c(a):c;a.s(["createStore",()=>d],12903);let e=a=>{let c=d(a),e=a=>(function(a,c=a=>a){let d=b.default.useSyncExternalStore(a.subscribe,b.default.useCallback(()=>c(a.getState()),[a,c]),b.default.useCallback(()=>c(a.getInitialState()),[a,c]));return b.default.useDebugValue(d),d})(c,a);return Object.assign(e,c),e},f=a=>a?e(a):e;a.s(["create",()=>f],20226);let g={get url(){return`file://${a.P("node_modules/zustand/esm/middleware.mjs")}`}},h=new Map,i=a=>{let b=h.get(a);return b?Object.fromEntries(Object.entries(b.stores).map(([a,b])=>[a,b.getState()])):{}},j=(a,b={})=>(c,d,e)=>{let f,{enabled:j,anonymousActionType:l,store:m,...n}=b;try{f=(null!=j?j:(g.env?g.env.MODE:void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(a){}if(!f)return a(c,d,e);let{connection:o,...p}=((a,b,c)=>{if(void 0===a)return{type:"untracked",connection:b.connect(c)};let d=h.get(c.name);if(d)return{type:"tracked",store:a,...d};let e={connection:b.connect(c),stores:{}};return h.set(c.name,e),{type:"tracked",store:a,...e}})(m,f,n),q=!0;e.setState=(a,b,f)=>{let g=c(a,b);if(!q)return g;let h=void 0===f?{type:l||(a=>{var b,c;if(!a)return;let d=a.split("\n"),e=d.findIndex(a=>a.includes("api.setState"));if(e<0)return;let f=(null==(b=d[e+1])?void 0:b.trim())||"";return null==(c=/.+ (.+) .+/.exec(f))?void 0:c[1]})(Error().stack)||"anonymous"}:"string"==typeof f?{type:f}:f;return void 0===m?null==o||o.send(h,d()):null==o||o.send({...h,type:`${m}/${h.type}`},{...i(n.name),[m]:e.getState()}),g},e.devtools={cleanup:()=>{o&&"function"==typeof o.unsubscribe&&o.unsubscribe(),((a,b)=>{if(void 0===b)return;let c=h.get(a);c&&(delete c.stores[b],0===Object.keys(c.stores).length&&h.delete(a))})(n.name,m)}};let r=(...a)=>{let b=q;q=!1,c(...a),q=b},s=a(e.setState,d,e);if("untracked"===p.type?null==o||o.init(s):(p.stores[p.store]=e,null==o||o.init(Object.fromEntries(Object.entries(p.stores).map(([a,b])=>[a,a===p.store?s:b.getState()])))),e.dispatchFromDevtools&&"function"==typeof e.dispatch){let a=!1,b=e.dispatch;e.dispatch=(...c)=>{(g.env?g.env.MODE:void 0)==="production"||"__setState"!==c[0].type||a||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),a=!0),b(...c)}}return o.subscribe(a=>{var b;switch(a.type){case"ACTION":if("string"!=typeof a.payload)return void console.error("[zustand devtools middleware] Unsupported action format");return k(a.payload,a=>{if("__setState"===a.type){if(void 0===m)return void r(a.state);1!==Object.keys(a.state).length&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);let b=a.state[m];return void(null==b||JSON.stringify(e.getState())!==JSON.stringify(b)&&r(b))}e.dispatchFromDevtools&&"function"==typeof e.dispatch&&e.dispatch(a)});case"DISPATCH":switch(a.payload.type){case"RESET":if(r(s),void 0===m)return null==o?void 0:o.init(e.getState());return null==o?void 0:o.init(i(n.name));case"COMMIT":if(void 0===m){null==o||o.init(e.getState());break}return null==o?void 0:o.init(i(n.name));case"ROLLBACK":return k(a.state,a=>{if(void 0===m){r(a),null==o||o.init(e.getState());return}r(a[m]),null==o||o.init(i(n.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return k(a.state,a=>{void 0===m?r(a):JSON.stringify(e.getState())!==JSON.stringify(a[m])&&r(a[m])});case"IMPORT_STATE":{let{nextLiftedState:c}=a.payload,d=null==(b=c.computedStates.slice(-1)[0])?void 0:b.state;if(!d)return;void 0===m?r(d):r(d[m]),null==o||o.send(null,c);break}case"PAUSE_RECORDING":return q=!q}return}}),s},k=(a,b)=>{let c;try{c=JSON.parse(a)}catch(a){console.error("[zustand devtools middleware] Could not parse the received json",a)}void 0!==c&&b(c)};a.s(["devtools",()=>j],62435)},55101,a=>{"use strict";a.s(["createSelectors",0,a=>{for(let b of(a.use={},Object.keys(a.getState())))a.use[b]=()=>a(a=>a[b]);return a}])},85767,14608,87733,4613,14441,50132,26170,30393,33888,72486,41842,92407,a=>{"use strict";var b=a.i(20226),c=a.i(62435),d=a.i(55101);let e=(0,b.create)()((0,c.devtools)(a=>({user:null,setUser:b=>a({user:b},!1,"setUser"),clearUser:()=>a({user:null},!1,"clearUser")}),{name:"AuthStore"})),f=(0,d.createSelectors)(e);a.s(["useAuthStore",0,f],14608),a.s([],87733);var g=a.i(33217),h=a.i(95345),i=a.i(12032);async function j(){let{data:a}=await h.default.get("/users/me/");return i.schemas.User.parse(a)}function k(){let a=f.use.user(),b=f.use.setUser();return(0,g.useQuery)({queryKey:["auth","current-user"],queryFn:async()=>{try{let a=await j();return b(a),a}catch(a){throw b(null),a}},enabled:!a,retry:!1,staleTime:1/0})}a.s(["useCurrentUserQuery",()=>k],4613);var l=a.i(37927),m=a.i(74560);function n(){let a=(0,l.useQueryClient)(),b=f.use.setUser();return(0,m.useAppMutation)(async a=>{let b=i.schemas.LoginRequest.parse(a),{data:c}=await h.default.post("/auth/login/",b);return i.schemas.User.parse(c)},{successMessage:"Logged in successfully",errorMessage:"Login failed",onSuccess:c=>{b(c),a.setQueryData(["auth","current-user"],c)}})}function o(){let a=(0,l.useQueryClient)(),b=f.use.clearUser();return(0,m.useAppMutation)(async()=>{await h.default.post("/auth/logout/")},{successMessage:"Logged out successfully",errorMessage:"Logout failed",onSuccess:()=>{b(),a.setQueryData(["auth","current-user"],null),a.clear()}})}function p(){let a=(0,l.useQueryClient)(),b=f.use.setUser();return(0,m.useAppMutation)(async a=>{let b=i.schemas.RegisterRequestRequest.parse(a),c=await h.default.post("/auth/register/",b);return i.schemas.User.parse(c.data)},{successMessage:"Registered successfully",errorMessage:"Registration failed",onSuccess:c=>{b(c),a.setQueryData(["auth","current-user"],c)}})}function q(){return(0,m.useAppMutation)(async a=>{let b=i.schemas.PatchedUserRequest.parse(a),c=await h.default.patch("/users/me/username/",b);return i.schemas.User.parse(c.data)},{successMessage:"Username updated successfully",errorMessage:"Failed to update username",invalidateQueries:[["current-user"]]})}function r(){let a=f.use.user();return a?.role==="admin"}a.s(["useLoginMutation",()=>n],14441),a.s(["useLogoutMutation",()=>o],50132),a.s(["useRegisterMutation",()=>p],26170),a.s(["useUpdateUsernameMutation",()=>q],30393),a.s([],33888),a.s(["useIsAdmin",()=>r],72486);var s=a.i(72131),t=a.i(50944);function u(){let a=(0,t.useRouter)(),b=r(),c=f.use.user();(0,s.useEffect)(()=>{c&&!b&&a.push("/dashboard")},[c,b,a])}a.s(["useRequireAdmin",()=>u],41842),a.s([],92407),a.s([],85767)},72758,a=>{"use strict";a.i(33888);var b=a.i(4613),c=a.i(14441),d=a.i(50132),e=a.i(26170),f=a.i(30393);a.s(["useCurrentUserQuery",()=>b.useCurrentUserQuery,"useLoginMutation",()=>c.useLoginMutation,"useLogoutMutation",()=>d.useLogoutMutation,"useRegisterMutation",()=>e.useRegisterMutation,"useUpdateUsernameMutation",()=>f.useUpdateUsernameMutation])},8618,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(85767);var e=a.i(72758),f=a.i(95345),g=a.i(40695),h=a.i(3130),i=a.i(65602),j=a.i(65626);function k(){let[a,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(null),v=(0,e.useRegisterMutation)(),w=(0,d.useRouter)(),x=(0,d.useSearchParams)();(0,c.useEffect)(()=>{let a=x.get("token");(async()=>{if(!a){q("Invalid invitation link. Token is missing."),s(!1);return}k(a);try{let b=await f.default.get(`/auth/validate-invitation/?token=${a}`);b.data.valid?u({email:b.data.email,company:b.data.company}):q("Invalid or expired invitation token")}catch(a){q(a?.response?.data?.error||"Invalid invitation token")}finally{s(!1)}})()},[x]);let y=async b=>{b.preventDefault(),q(null);try{await v.mutateAsync({token:a,password:n,username:l||void 0}),w.push("/dashboard")}catch(a){a instanceof Error?q(a.message||"Registration failed"):q("Registration failed")}};return r?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Validating invitation..."})}):p&&!t?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 p-4",children:(0,b.jsx)(h.Card,{className:"w-full max-w-md mx-auto",children:(0,b.jsxs)(h.CardContent,{className:"p-6 text-center",children:[(0,b.jsx)(i.Alert,{variant:"destructive",className:"mb-4",children:(0,b.jsx)(i.AlertDescription,{children:p})}),(0,b.jsx)(g.Button,{onClick:()=>w.push("/login"),variant:"outline",children:"Go to Login"})]})})}):(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 p-4",children:(0,b.jsxs)(h.Card,{className:"w-full max-w-md mx-auto",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{className:"text-2xl text-center",children:"Complete Your Registration"})}),(0,b.jsxs)(h.CardContent,{children:[t&&(0,b.jsx)(i.Alert,{className:"mb-6",children:(0,b.jsxs)(i.AlertDescription,{children:[(0,b.jsxs)("p",{className:"text-sm mb-1",children:["Email: ",(0,b.jsx)("span",{className:"font-medium",children:t.email})]}),t.company&&(0,b.jsxs)("p",{className:"text-sm",children:["Company: ",(0,b.jsx)("span",{className:"font-medium",children:t.company.name})]})]})}),(0,b.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,b.jsx)(j.FormField,{label:"Username",type:"text",placeholder:"Username (optional)",value:l,onChange:a=>m(a.target.value)}),(0,b.jsx)(j.FormField,{label:"Password",type:"password",placeholder:"Password",value:n,onChange:a=>o(a.target.value),required:!0}),p&&(0,b.jsx)(i.Alert,{variant:"destructive",children:(0,b.jsx)(i.AlertDescription,{children:p})}),(0,b.jsx)(g.Button,{type:"submit",disabled:v.isPending,className:"w-full",children:v.isPending?"Registering...":"Complete Registration"})]})]})]})})}function l(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})}),children:(0,b.jsx)(k,{})})}a.s(["default",()=>l])}];

//# sourceMappingURL=_930e05a0._.js.map