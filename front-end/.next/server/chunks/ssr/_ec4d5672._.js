module.exports=[85767,14608,87733,4613,14441,50132,26170,30393,33888,72486,41842,92407,a=>{"use strict";var b=a.i(20226),c=a.i(62435),d=a.i(55101);let e=(0,b.create)()((0,c.devtools)(a=>({user:null,setUser:b=>a({user:b},!1,"setUser"),clearUser:()=>a({user:null},!1,"clearUser")}),{name:"AuthStore"})),f=(0,d.createSelectors)(e);a.s(["useAuthStore",0,f],14608),a.s([],87733);var g=a.i(33217),h=a.i(95345),i=a.i(12032);async function j(){let{data:a}=await h.default.get("/users/me/");return i.schemas.User.parse(a)}function k(){let a=f.use.user(),b=f.use.setUser();return(0,g.useQuery)({queryKey:["auth","current-user"],queryFn:async()=>{try{let a=await j();return b(a),a}catch(a){throw b(null),a}},enabled:!a,retry:!1,staleTime:1/0})}a.s(["useCurrentUserQuery",()=>k],4613);var l=a.i(37927),m=a.i(74560);function n(){let a=(0,l.useQueryClient)(),b=f.use.setUser();return(0,m.useAppMutation)(async a=>{let b=i.schemas.LoginRequest.parse(a),{data:c}=await h.default.post("/auth/login/",b);return i.schemas.User.parse(c)},{successMessage:"Logged in successfully",errorMessage:"Login failed",onSuccess:c=>{b(c),a.setQueryData(["auth","current-user"],c)}})}function o(){let a=(0,l.useQueryClient)(),b=f.use.clearUser();return(0,m.useAppMutation)(async()=>{await h.default.post("/auth/logout/")},{successMessage:"Logged out successfully",errorMessage:"Logout failed",onSuccess:()=>{b(),a.setQueryData(["auth","current-user"],null),a.clear()}})}function p(){let a=(0,l.useQueryClient)(),b=f.use.setUser();return(0,m.useAppMutation)(async a=>{let b=i.schemas.RegisterRequestRequest.parse(a),c=await h.default.post("/auth/register/",b);return i.schemas.User.parse(c.data)},{successMessage:"Registered successfully",errorMessage:"Registration failed",onSuccess:c=>{b(c),a.setQueryData(["auth","current-user"],c)}})}function q(){return(0,m.useAppMutation)(async a=>{let b=i.schemas.PatchedUserRequest.parse(a),c=await h.default.patch("/users/me/username/",b);return i.schemas.User.parse(c.data)},{successMessage:"Username updated successfully",errorMessage:"Failed to update username",invalidateQueries:[["current-user"]]})}function r(){let a=f.use.user();return a?.role==="admin"}a.s(["useLoginMutation",()=>n],14441),a.s(["useLogoutMutation",()=>o],50132),a.s(["useRegisterMutation",()=>p],26170),a.s(["useUpdateUsernameMutation",()=>q],30393),a.s([],33888),a.s(["useIsAdmin",()=>r],72486);var s=a.i(72131),t=a.i(50944);function u(){let a=(0,t.useRouter)(),b=r(),c=f.use.user();(0,s.useEffect)(()=>{c&&!b&&a.push("/dashboard")},[c,b,a])}a.s(["useRequireAdmin",()=>u],41842),a.s([],92407),a.s([],85767)},72758,a=>{"use strict";a.i(33888);var b=a.i(4613),c=a.i(14441),d=a.i(50132),e=a.i(26170),f=a.i(30393);a.s(["useCurrentUserQuery",()=>b.useCurrentUserQuery,"useLoginMutation",()=>c.useLoginMutation,"useLogoutMutation",()=>d.useLogoutMutation,"useRegisterMutation",()=>e.useRegisterMutation,"useUpdateUsernameMutation",()=>f.useUpdateUsernameMutation])},55585,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(85767);var e=a.i(72758),f=a.i(40695),g=a.i(3130),h=a.i(65626),i=a.i(64781);let j=[{label:"Publix Admin",value:"publix",email:"admin_publix@publix.com",password:"admin123"},{label:"Walmart Admin",value:"walmart",email:"admin_walmart@walmart.com",password:"admin123"}];function k(){let[a,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(null),r=(0,e.useLoginMutation)(),s=(0,d.useRouter)(),t=async b=>{b.preventDefault(),q(null);try{await r.mutateAsync({email:a,password:l}),s.push("/dashboard")}catch(a){a instanceof Error?q(a.message||"Login failed"):q("Login failed")}};return(0,b.jsxs)(g.Card,{className:"w-full max-w-md mx-auto",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{className:"text-2xl text-center",children:"Login"})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("form",{onSubmit:t,className:"space-y-4",children:[(0,b.jsx)(i.FormSelectField,{label:"Demo User",value:n,onValueChange:a=>{if(o(a),a){let b=j.find(b=>b.value===a);b&&(k(b.email),m(b.password))}else k(""),m("")},options:j.map(a=>({label:a.label,value:a.value})),placeholder:"Select a demo user..."}),(0,b.jsx)(h.FormField,{label:"Email",type:"email",placeholder:"Email",value:a,onChange:a=>k(a.target.value),required:!0}),(0,b.jsx)(h.FormField,{label:"Password",type:"password",placeholder:"Password",value:l,onChange:a=>m(a.target.value),required:!0}),p&&(0,b.jsx)("p",{className:"text-destructive text-sm",children:p}),(0,b.jsx)(f.Button,{type:"submit",disabled:r.isPending,className:"w-full",children:r.isPending?"Loading...":"Login"})]})})]})}a.s(["default",()=>k])}];

//# sourceMappingURL=_ec4d5672._.js.map