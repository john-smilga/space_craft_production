(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var s=e.i(43476),t=e.i(47163);function r({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function i({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function a({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...r})}function n({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...r})}function l({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>a])},10708,e=>{"use strict";var s=e.i(43476),t=e.i(71645);e.i(74080);var r=e.i(91918),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,i)=>{let a=(0,r.createSlot)(`Primitive.${i}`),n=t.forwardRef((e,t)=>{let{asChild:r,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(r?a:i,{...n,ref:t})});return n.displayName=`Primitive.${i}`,{...e,[i]:n}},{}),a=t.forwardRef((e,t)=>(0,s.jsx)(i.label,{...e,ref:t,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));a.displayName="Label";var n=e.i(47163);function l({className:e,...t}){return(0,s.jsx)(a,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}e.s(["Label",()=>l],10708)},4845,96423,e=>{"use strict";var s=e.i(43476),t=e.i(10708),r=e.i(47163);function i({className:e,type:t,...i}){return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}function a({label:e,id:a,containerClassName:n,className:l,...d}){let c=a||`field-${e.toLowerCase().replace(/\s+/g,"-")}`;return(0,s.jsxs)("div",{className:(0,r.cn)("space-y-2",n),children:[(0,s.jsx)(t.Label,{htmlFor:c,children:e}),(0,s.jsx)(i,{id:c,className:l,...d})]})}e.s(["Input",()=>i],96423),e.s(["FormField",()=>a],4845)},81947,e=>{"use strict";var s=e.i(43476),t=e.i(25913),r=e.i(47163);let i=(0,t.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function a({className:e,variant:t,...a}){return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(i({variant:t}),e),...a})}function n({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}e.s(["Alert",()=>a,"AlertDescription",()=>n])},24851,e=>{"use strict";var s=e.i(43476),t=e.i(70065);function r({message:e}){return(0,s.jsx)(t.Card,{className:"p-12",children:(0,s.jsx)(t.CardContent,{className:"p-0",children:(0,s.jsx)("p",{className:"text-muted-foreground text-lg font-medium text-center",children:e})})})}e.s(["default",()=>r])},94241,e=>{"use strict";e.i(38734);var s=e.i(29036),t=e.i(63156);e.s(["useIsAdmin",()=>s.useIsAdmin,"useRequireAdmin",()=>t.useRequireAdmin])},42974,e=>{"use strict";var s=e.i(43476);e.i(21400);var t=e.i(4083);function r({fallback:e=null,children:r}){let i=t.useAuthStore.use.user();return i?.role!=="admin"?(0,s.jsx)(s.Fragment,{children:e}):(0,s.jsx)(s.Fragment,{children:r})}e.s(["AdminOnly",()=>r])},26371,e=>{"use strict";var s=e.i(13555),t=e.i(7372),r=e.i(12348);function i(){return(0,t.usePaginatedQuery)(["users"],async()=>{let e=await s.default.get("/users/");return r.schemas.PaginatedUserList.parse(e.data)})}e.s(["useUsersQuery",()=>i])},88856,e=>{"use strict";var s=e.i(66027),t=e.i(13555),r=e.i(12348);function i(e){return(0,s.useQuery)({queryKey:["user",e],queryFn:async()=>{if(!e)throw Error("User slug is required");let s=await t.default.get(`/users/${e}/`);return r.schemas.User.parse(s.data)},enabled:!!e})}e.s(["useUserQuery",()=>i])},13781,e=>{"use strict";var s=e.i(13555),t=e.i(7372),r=e.i(12348);function i(){return(0,t.useAppMutation)(async e=>{let t=r.schemas.UserInviteRequest.parse(e),i=await s.default.post("/users/invite/",t);return r.schemas.UserInviteResponse.parse(i.data)},{successMessage:"User invitation created successfully",errorMessage:"Failed to create invitation",invalidateQueries:[["users"]]})}e.s(["useInviteUserMutation",()=>i])},62227,e=>{"use strict";var s=e.i(13555),t=e.i(7372);function r(e){return(0,t.useAppMutation)(async()=>{await s.default.delete(`/users/${e}/`)},{successMessage:"User deleted successfully",errorMessage:"Failed to delete user",invalidateQueries:[["users"],["user",e]]})}e.s(["useDeleteUserMutation",()=>r])},78063,e=>{"use strict";e.i(26371),e.i(88856),e.i(13781),e.i(62227),e.s([])},11261,e=>{"use strict";var s=e.i(43476),t=e.i(92989);e.i(21400);var r=e.i(94241),i=e.i(24851),a=e.i(70065),n=e.i(81947),l=e.i(47163);e.i(78063);var d=e.i(26371);function c(){(0,r.useRequireAdmin)();let e=(0,t.useRouter)(),{data:c,isLoading:o,error:u}=(0,d.useUsersQuery)(),m=c||[];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Users"}),o?(0,s.jsx)("div",{className:"text-center py-8",children:"Loading..."}):u?(0,s.jsx)(n.Alert,{variant:"destructive",className:"mb-4",children:(0,s.jsx)(n.AlertDescription,{children:u.message})}):0===m.length?(0,s.jsx)(i.default,{message:"No users found"}):(0,s.jsx)(a.Card,{children:(0,s.jsx)(a.CardContent,{className:"p-0",children:(0,s.jsx)("ul",{className:"divide-y divide-border",children:m.map(t=>(0,s.jsx)("li",{onClick:()=>{var s;return s=t.slug,void e.push(`/dashboard/users/${s}`)},className:"px-6 py-4 hover:bg-accent cursor-pointer transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-medium",children:t.username}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:t.email})]})})}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Joined: ",(0,l.formatDate)(t.date_joined||"")]})]})},t.id))})})})]})}e.s(["UserList",()=>c])},80347,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(5766);e.i(21400);var i=e.i(4083),a=e.i(94241),n=e.i(67881),l=e.i(96423),d=e.i(70065),c=e.i(81947),o=e.i(4845);e.i(78063);var u=e.i(13781);function m(){(0,a.useRequireAdmin)();let e=i.useAuthStore.use.user(),[m,x]=(0,t.useState)(""),[v,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(null),g=(0,u.useInviteUserMutation)(),j=async e=>{e.preventDefault(),f(null);try{let e=await g.mutateAsync({email:m,username:v,role:"member"});f({link:e.invitation_link,token:e.invitation_token}),x(""),h("")}catch{}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Invite User"}),(0,s.jsxs)(d.Card,{className:"max-w-2xl",children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{children:"Create Invitation"})}),(0,s.jsxs)(d.CardContent,{children:[(0,s.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,s.jsx)(o.FormField,{label:"Email",type:"email",value:m,onChange:e=>x(e.target.value),required:!0,placeholder:"user@example.com"}),(0,s.jsx)(o.FormField,{label:"Username",type:"text",value:v,onChange:e=>h(e.target.value),required:!0,placeholder:"username"}),e?.company&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.FormField,{label:"Company",type:"text",value:e.company.name,readOnly:!0,className:"bg-muted"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Users will be added to your company as members"})]}),g.isError&&(0,s.jsx)(c.Alert,{variant:"destructive",children:(0,s.jsx)(c.AlertDescription,{children:g.error?.message||"Failed to create invitation"})}),(0,s.jsx)(n.Button,{type:"submit",disabled:g.isPending,className:"w-full",children:g.isPending?"Creating Invitation...":"Create Invitation"})]}),p&&(0,s.jsx)(c.Alert,{className:"mt-6",children:(0,s.jsxs)(c.AlertDescription,{className:"mb-2",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Invitation created successfully!"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium mb-1",children:"Invitation Link:"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(l.Input,{type:"text",value:p.link,readOnly:!0,className:"flex-1 text-sm bg-muted"}),(0,s.jsx)(n.Button,{type:"button",onClick:()=>{var e;return e=p.link,void(navigator.clipboard.writeText(e),r.default.success("Link copied to clipboard!"))},variant:"outline",size:"sm",children:"Copy"})]})]}),(0,s.jsx)("p",{className:"text-xs mt-2",children:"Share this link with the user. They will use it to complete their registration."})]})]})})]})]})]})}e.s(["InviteUserForm",()=>m])},68838,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(92989);e.i(21400);var i=e.i(94241),a=e.i(67881),n=e.i(70065),l=e.i(81947),d=e.i(42974),c=e.i(47163);e.i(78063);var o=e.i(88856),u=e.i(62227);function m({label:e,children:t}){return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:e}),(0,s.jsx)("p",{className:"text-lg",children:t})]})}function x({userSlug:e}){(0,i.useRequireAdmin)();let x=(0,r.useRouter)(),[v,h]=(0,t.useState)(!1),{data:p,isLoading:f,error:g}=(0,o.useUserQuery)(e),j=(0,u.useDeleteUserMutation)(e),b=async()=>{try{await j.mutateAsync(),x.push("/dashboard/users")}catch{h(!1)}},y=async()=>{v?await b():h(!0)};return f?(0,s.jsx)("div",{className:"text-center py-8",children:"Loading..."}):g&&!p?(0,s.jsxs)(l.Alert,{variant:"destructive",className:"mb-4",children:[(0,s.jsx)(l.AlertDescription,{children:g.message}),(0,s.jsx)(a.Button,{onClick:()=>x.push("/dashboard/users"),variant:"outline",className:"mt-4",children:"Back to Users"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"User Details"})}),j.isError&&(0,s.jsx)(l.Alert,{variant:"destructive",className:"mb-4",children:(0,s.jsx)(l.AlertDescription,{children:j.error?.message})}),p&&(0,s.jsx)(n.Card,{children:(0,s.jsxs)(n.CardContent,{className:"p-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(m,{label:"Username",children:p.username}),(0,s.jsx)(m,{label:"Email",children:p.email}),(0,s.jsx)(m,{label:"Role",children:(0,s.jsx)("span",{className:"capitalize",children:p.role})}),(0,s.jsx)(m,{label:"Date Joined",children:(0,c.formatDate)(p.date_joined||"")}),(0,s.jsx)(m,{label:"User ID",children:p.id})]}),(0,s.jsx)(d.AdminOnly,{children:(0,s.jsx)("div",{className:"mt-8 pt-6 border-t border-border",children:v?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-destructive font-medium",children:"Are you sure you want to delete this user? This action cannot be undone."}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a.Button,{onClick:b,disabled:j.isPending,variant:"destructive",children:j.isPending?"Deleting...":"Confirm Delete"}),(0,s.jsx)(a.Button,{onClick:()=>{h(!1)},disabled:j.isPending,variant:"outline",children:"Cancel"})]})]}):(0,s.jsx)(a.Button,{onClick:y,variant:"destructive",children:"Delete User"})})})]})})]})}e.s(["UserDetail",()=>x])}]);