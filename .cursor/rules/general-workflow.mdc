---
alwaysApply: true
---
# General Workflow Rules

If you are reading this file, always start response with ðŸ¥¶ðŸ¥¶ðŸ¥¶ðŸ¥¶

If you need to clarify anything before starting the task, ask your questions first. Wait for answers before you begin implementing the task.

When making a commit, always use a short and clear commit message.

Always use context7 when I need code generation, setup or configuration steps, or
library/API documentation. This means you should automatically use the Context7 MCP
tools to resolve library id and get library docs without me having to explicitly ask.


## CRITICAL: Always Work in Smallest Steps

When making ANY updates or changes to the codebase, you MUST:

1. **Break work into the smallest possible steps**

   - Each step should be a single, focused change
   - One file creation/modification per step (unless files are tightly coupled)
   - One logical unit of work per step

2. **Explain EVERYTHING in detail before proceeding**

   - Explain WHAT you're doing
   - Explain WHY you're doing it
   - Show code examples of what will be created/modified
   - Explain the purpose of each file/function/class
   - Explain how it fits into the overall architecture

3. **Wait for explicit approval before moving to next step**

   - After explaining a step, wait for user to say "ok", "next", "proceed", "continue", or similar
   - DO NOT proceed to the next step until explicitly approved
   - If user asks questions, answer them completely before proceeding

4. **Show code examples for every step**
   - Show the complete code that will be created
   - Explain each part of the code **in the chat response**, NOT as inline code comments
   - Code should be clean and self-documenting; add comments only for non-trivial logic
   - Show how it connects to other parts of the system

## Workflow Pattern

For each step:

1. **Announce the step**: "Step X: [Brief description]"
2. **Explain what**: What file/functionality you're creating
3. **Explain why**: Why this step is necessary
4. **Show code**: Complete code example (comments only for non-trivial logic)
5. **Explain connections**: How it connects to existing code
6. **Wait for approval**: "Is this step okay? Say 'ok' or 'next' to proceed."

## Example

**Step 1: Create User Model**

**What**: Creating the custom User model in `apps/auth/models/user.py`

**Why**: We need a custom user model with UUID primary key instead of Django's default integer ID. This provides better security and allows for distributed systems.

**Code**:

```python
import uuid
from django.contrib.auth.models import AbstractUser
from django.db import models

class User(AbstractUser):
    """Custom user model with UUID primary key."""
    
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    email = models.EmailField(unique=True)
    
    USERNAME_FIELD = "email"
    REQUIRED_FIELDS = ["username"]
    
    class Meta:
        db_table = "auth_user"
```

**Explanation** (provided in chat response, not as code comments):

- `AbstractUser`: Extends Django's built-in user model
- `id = UUIDField`: Uses UUID instead of auto-incrementing integer
- `email = EmailField(unique=True)`: Ensures email uniqueness
- `USERNAME_FIELD = "email"`: Use email for authentication
- `REQUIRED_FIELDS = ["username"]`: Username still required but not used for login

**Connections**: This model will be referenced in settings as `AUTH_USER_MODEL = "user_auth.User"`

**Is this step okay? Say 'ok' or 'next' to proceed.**


